"use strict";
/**
 * Module to desugar all loops to while loops. This requires
 * the following transformations to be done:
 *
 * This plugin must enforce the following assumption about loops:
 *
 * Loop bodies are BlockStatements:
 * Loops can have an ExpressionStatement for their body. This messes
 * up the anf pass since it tries to added the complex named expression
 * to the nearest statement. In this case, the statement will be
 * outside the body of the for loop, effectively hoisting them outside
 * the function body. To fix this, the body of all loops should a statement.
 *
 * Postconditions:
 *
 *   1. The program only has while loops.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const t = require("babel-types");
const h = require("@stopify/util");
const hygiene_1 = require("@stopify/hygiene");
// Object containing the visitor functions
const loopVisitor = {
    ForInStatement(path) {
        const { left, right, body } = path.node;
        const it_obj = hygiene_1.fresh('it_obj');
        const keys = hygiene_1.fresh('keys');
        const idx = hygiene_1.fresh('idx');
        const prop = t.isVariableDeclaration(left) ?
            t.variableDeclaration(left.kind, [
                t.variableDeclarator(left.declarations[0].id, t.memberExpression(keys, idx, true))
            ]) :
            t.expressionStatement(t.assignmentExpression('=', left, t.memberExpression(keys, idx, true)));
        path.insertBefore(h.letExpression(it_obj, right));
        let newBody = h.flatBodyStatement([
            h.letExpression(keys, t.callExpression(t.memberExpression(t.identifier('Object'), t.identifier('keys')), [it_obj]), 'const'),
            t.forStatement(h.letExpression(idx, t.numericLiteral(0)), t.binaryExpression('<', idx, t.memberExpression(keys, t.identifier('length'))), t.updateExpression('++', idx), h.flatBodyStatement([prop, body])),
            t.expressionStatement(t.assignmentExpression('=', it_obj, t.callExpression(t.memberExpression(t.identifier('Object'), t.identifier('getPrototypeOf')), [it_obj])))
        ]);
        if (path.node.continue_label) {
            newBody = t.labeledStatement(path.node.continue_label, newBody);
            newBody.skip = true;
        }
        path.replaceWith(h.continueLbl(t.whileStatement(t.binaryExpression('!==', it_obj, t.nullLiteral()), newBody), path.node.continue_label));
    },
    // Convert For Statements into While Statements
    ForStatement(path) {
        const node = path.node;
        let { init, test, update, body: wBody } = node;
        let nupdate = update;
        // New body is a the old body with the update appended to the end.
        if (nupdate === null) {
            nupdate = t.emptyStatement();
        }
        else {
            nupdate = t.expressionStatement(update);
        }
        const loopContinue = path.node.continue_label ||
            hygiene_1.fresh('loop_continue');
        const labelContinue = t.labeledStatement(loopContinue, wBody);
        labelContinue.skip = true;
        wBody = t.blockStatement([
            labelContinue,
            nupdate,
        ]);
        // Test can be null
        if (test === null) {
            test = t.booleanLiteral(true);
        }
        const wl = h.continueLbl(t.whileStatement(test, wBody), loopContinue);
        // The init can either be a variable declaration or an expression
        let nInit = t.emptyStatement();
        if (init !== null) {
            nInit = t.isExpression(init) ? t.expressionStatement(init) : init;
        }
        h.replaceWithStatements(path, nInit, wl);
    },
    // Convert do-while statements into while statements.
    DoWhileStatement(path) {
        const node = path.node;
        let { test, body } = node;
        // Add flag to run the while loop at least once
        const runOnce = hygiene_1.fresh('runOnce');
        const runOnceInit = t.variableDeclaration('let', [t.variableDeclarator(runOnce, t.booleanLiteral(true))]);
        const runOnceSetFalse = t.expressionStatement(t.assignmentExpression('=', runOnce, t.booleanLiteral(false)));
        body = h.flatBodyStatement([runOnceSetFalse, body]);
        if (path.node.continue_label) {
            body = t.labeledStatement(path.node.continue_label, body);
            body.skip = true;
        }
        test = t.logicalExpression('||', runOnce, test);
        h.replaceWithStatements(path, runOnceInit, h.continueLbl(t.whileStatement(test, body), path.node.continue_label));
    },
    WhileStatement(path) {
        if (!path.node.continue_label) {
            const loopContinue = hygiene_1.fresh('loop_continue');
            // Wrap the body in a labeled continue block.
            path.node = h.continueLbl(path.node, loopContinue);
            path.node.body = t.labeledStatement(loopContinue, path.node.body);
            path.node.body.skip = true;
        }
        // Wrap the loop in labeled break block.
        if (!path.node.break_label) {
            const loopBreak = hygiene_1.fresh('loop_break');
            path.node = h.breakLbl(path.node, loopBreak);
            const labeledStatement = t.labeledStatement(loopBreak, path.node);
            labeledStatement.skip = true;
            path.replaceWith(labeledStatement);
        }
    },
    LabeledStatement: {
        enter(path, s) {
            if (path.node.skip) {
                return;
            }
            const { label, body } = path.node;
            if (t.isLoop(body) && !body.continue_label) {
                const lbl = hygiene_1.fresh('loop_continue');
                if (!(label.name in s)) {
                    s[label.name] = [lbl];
                }
                else {
                    s[label.name].push(lbl);
                }
                if (t.isWhileStatement(path.node.body)) {
                    const lblWhileBody = t.labeledStatement(lbl, body.body);
                    lblWhileBody.skip = true;
                    path.node.body.body = h.continueLbl(lblWhileBody, lbl);
                }
                else {
                    path.node.body = h.continueLbl(body, lbl);
                }
            }
        },
        exit(path, s) {
            if (path.node.skip) {
                return;
            }
            const { label, body } = path.node;
            if (t.isLoop(body)) {
                s[label.name].pop();
            }
        },
    },
    ContinueStatement(path, s) {
        const { label } = path.node;
        if (label) {
            const lbls = s[label.name];
            path.node.label = lbls[lbls.length - 1];
        }
    }
};
module.exports = function () {
    return { visitor: loopVisitor };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVzdWdhckxvb3AuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90cy9kZXN1Z2FyTG9vcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQkc7O0FBR0gsaUNBQWlDO0FBQ2pDLG1DQUFtQztBQUNuQyw4Q0FBeUM7QUFNekMsMENBQTBDO0FBQzFDLE1BQU0sV0FBVyxHQUFhO0lBQzVCLGNBQWMsQ0FBQyxJQUF5QztRQUN0RCxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3hDLE1BQU0sTUFBTSxHQUFHLGVBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMvQixNQUFNLElBQUksR0FBRyxlQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0IsTUFBTSxHQUFHLEdBQUcsZUFBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzVDLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUMvQixDQUFDLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDbkYsQ0FBQyxDQUFDLENBQUM7WUFDSixDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTlGLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUs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